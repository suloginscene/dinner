language: java
jdk: openjdk11

branches:
  only:
    - master

cache:
  directories:
    - $HOME/.m2

script:
  - ./mvnw package -DskipTests=true

after_success:
  - docker build -t dinner:latest ./
  - docker tag dinner:latest scenecho/dinner:latest
  - echo "$DOCKER_HUB_PASSWORD" | docker login -u "$DOCKER_HUB_ID" --password-stdin
  - docker push scenecho/dinner:latest

notifications:
  email:
    recipients:
      - suloginscene@gmail.com
